
$(function(){function t(t,i,a){if(t.naturalWidth){var n=t.naturalWidth,e=t.naturalHeight;i(n,e)}else{var r=new window.Image,o=t.src;o+=o.indexOf("?")==-1?"?_="+ +new Date:"&_="+ +new Date,r.src=o,r.onload=function(){"function"==typeof i&&i(r.width,r.height)},r.onerror=function(){"function"==typeof a&&a()}}}function i(i){$(i).hide().before('<img src="/css/main/images/loading.gif" style="width:30px; height:30px; position:absolute; left:50%; top:50%; margin-left:-15px; margin-top:-15px;" />');var a=$(i).parent().width(),n=$(i).parent().height();!function(i,a,n){t(i,function(t,e){var r=a/t,o=n/e,h=0,p=0,m=0;h="fill"==$(i).attr("data-mode")?Math.min(r,o):Math.max(r,o),p=t*h,m=e*h;var s=(p-a)/2,d=(m-n)/2,f=-d+"px";"scaletop"==$(i).attr("data-mode")&&(f="0");var g="block";$(i).hasClass("imgfixhidden")&&(g="hidden"),$(i).css({width:p+"px",height:m+"px",position:"absolute",marginLeft:-s+"px",marginTop:f,display:g}).prev().remove()},function(){var t=$.trim($(i).attr("data-img404")),a=$.trim($(i).attr("data-img404w")),n=$.trim($(i).attr("data-img404h"));""!==t&&""!==a&&""!==n||(t="/css/main/images/404.png",a=23,n=23),$(i).prev().attr("src",t).css({width:a+"px",height:n+"px",marginLeft:"-"+a/2+"px",marginTop:"-"+n/2+"px"})})}(i,a,n)}window.imgfix=i,$(".imgfix").each(function(){i(this)})});